# Health & System Monitoring Endpoints

health:
  get:
    tags:
      - Health
    summary: Basic health check
    description: Returns basic system health status
    operationId: getHealth
    security: []
    responses:
      '200':
        description: System is healthy
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "ok"
                timestamp:
                  type: string
                  format: date-time
                uptime:
                  type: number
                  description: Uptime in seconds
                  example: 3600
                version:
                  type: string
                  example: "1.0.0"
            examples:
              healthy:
                summary: Healthy response
                value:
                  status: "ok"
                  timestamp: "2024-01-15T10:30:00Z"
                  uptime: 3600
                  version: "1.0.0"
      '503':
        description: System is unhealthy
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "unhealthy"
                timestamp:
                  type: string
                  format: date-time
                errors:
                  type: array
                  items:
                    type: string

health-live:
  get:
    tags:
      - Health
    summary: Liveness probe
    description: Kubernetes/Docker liveness probe endpoint
    operationId: getLiveness
    security: []
    responses:
      '200':
        description: Service is alive
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "alive"
                timestamp:
                  type: string
                  format: date-time
      '503':
        description: Service is not alive
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "dead"
                timestamp:
                  type: string
                  format: date-time

health-ready:
  get:
    tags:
      - Health
    summary: Readiness probe
    description: Kubernetes/Docker readiness probe endpoint
    operationId: getReadiness
    security: []
    responses:
      '200':
        description: Service is ready to serve traffic
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "ready"
                timestamp:
                  type: string
                  format: date-time
                checks:
                  type: object
                  properties:
                    database:
                      type: string
                      example: "connected"
                    redis:
                      type: string
                      example: "connected"
                    storage:
                      type: string
                      example: "accessible"
      '503':
        description: Service is not ready
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "not_ready"
                timestamp:
                  type: string
                  format: date-time
                checks:
                  type: object
                  additionalProperties:
                    type: string

health-detailed:
  get:
    tags:
      - Health
    summary: Detailed health check
    description: Comprehensive system health with dependency status
    operationId: getDetailedHealth
    security: []
    responses:
      '200':
        description: Detailed health information
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  enum: [healthy, degraded, unhealthy]
                timestamp:
                  type: string
                  format: date-time
                uptime:
                  type: number
                version:
                  type: string
                environment:
                  type: string
                  example: "production"
                dependencies:
                  type: object
                  properties:
                    database:
                      type: object
                      properties:
                        status:
                          type: string
                          example: "healthy"
                        responseTime:
                          type: number
                          description: Response time in milliseconds
                        lastCheck:
                          type: string
                          format: date-time
                    redis:
                      type: object
                      properties:
                        status:
                          type: string
                        responseTime:
                          type: number
                        lastCheck:
                          type: string
                          format: date-time
                    storage:
                      type: object
                      properties:
                        status:
                          type: string
                        responseTime:
                          type: number
                        lastCheck:
                          type: string
                          format: date-time
                    external_apis:
                      type: object
                      additionalProperties:
                        type: object
                        properties:
                          status:
                            type: string
                          responseTime:
                            type: number
                          lastCheck:
                            type: string
                            format: date-time
                metrics:
                  type: object
                  properties:
                    memory:
                      type: object
                      properties:
                        used:
                          type: number
                        total:
                          type: number
                        percentage:
                          type: number
                    cpu:
                      type: object
                      properties:
                        usage:
                          type: number
                          description: CPU usage percentage
                    requests:
                      type: object
                      properties:
                        total:
                          type: number
                        rate:
                          type: number
                          description: Requests per second
                        errors:
                          type: number
                          description: Error count in last hour
            examples:
              healthy:
                summary: All systems healthy
                value:
                  status: "healthy"
                  timestamp: "2024-01-15T10:30:00Z"
                  uptime: 3600
                  version: "1.0.0"
                  environment: "production"
                  dependencies:
                    database:
                      status: "healthy"
                      responseTime: 5
                      lastCheck: "2024-01-15T10:29:55Z"
                    redis:
                      status: "healthy"
                      responseTime: 2
                      lastCheck: "2024-01-15T10:29:55Z"
                    storage:
                      status: "healthy"
                      responseTime: 10
                      lastCheck: "2024-01-15T10:29:55Z"
                  metrics:
                    memory:
                      used: 512000000
                      total: 1073741824
                      percentage: 47.7
                    cpu:
                      usage: 15.5
                    requests:
                      total: 1500
                      rate: 25
                      errors: 2
              degraded:
                summary: Some services degraded
                value:
                  status: "degraded"
                  timestamp: "2024-01-15T10:30:00Z"
                  uptime: 3600
                  version: "1.0.0"
                  environment: "production"
                  dependencies:
                    database:
                      status: "healthy"
                      responseTime: 5
                      lastCheck: "2024-01-15T10:29:55Z"
                    redis:
                      status: "degraded"
                      responseTime: 150
                      lastCheck: "2024-01-15T10:29:55Z"
                    storage:
                      status: "healthy"
                      responseTime: 10
                      lastCheck: "2024-01-15T10:29:55Z"
      '503':
        description: System is unhealthy
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  type: string
                  example: "unhealthy"
                timestamp:
                  type: string
                  format: date-time
                errors:
                  type: array
                  items:
                    type: object
                    properties:
                      component:
                        type: string
                      message:
                        type: string
                      severity:
                        type: string
                        enum: [low, medium, high, critical]